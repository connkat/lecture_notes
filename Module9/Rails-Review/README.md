# Module9W23 - Rails Review

Welcome Back! Fun fact: this lecture was delivered by covid--I tested positive this afternoon. Apologies for not getting to the `Nested Resources` part of the lecture, but these notes will still cover it. it is mostly just syntax fortunately! There are also 2 different rails apps that you can pull from and play around with. Remember that the version of rails that I was using today is ahead of the one that you are using for Jungle right now. 

- [lecture recording](https://vimeo.com/662480132/29c69f9a2f)
- [notes](https://github.com/connkat/lecture_notes/tree/master/Module9/Rails-Review)

## TODO

- [x] Catchup
- [x] Thoughts on Rails so far
- [x] What is Rails?
- [x] MVC Review
- [x] Create ROR Application
- [] Nested Resources

## Thoughts so far

- "meh"
- Abstraction is difficult
- Class based oop seems overly complex
- So many options/methods to memorize
- Relationship between AR / SQL
- :string syntax


## What is Rails?

Ruby on Rails, or Rails, is a server-side web application framework written in Ruby under the MIT License. Rails is a model–view–controller framework, providing default structures for a database, a web service, and web pages.

## Model View Controller Review
- Model: Responsible for handling data logic (eg. database queries)
- View: Responsible for the UI (User Interface)
- Controller: Ties the model and view together, talks to both and shares data between them
Rails also uses a router (routes.rb) sitting between the user requests and the controllers that respond to those requests

### Rails Libraries
Rails is a framework made up of a collection of libraries
- Active Record
    * An Object Relational Mapper (ORM)
    * Allows you to query and modify the application data in an intuitive way
- Action View
    * Handles template lookup and rendering
    * Provides helpers for building forms and other UI elements
- Action Controller
    * Controller library
    * Controller's make sense of the request and decide what should be returned to the client
- Action Dispatch
    * The Rails router
    * Handles incoming requests and forwards them to the correct controller
- Action Cable
    * Websockets for Rails

## Nested Routes

We define the nesting in our routes. In routes.rb:

```
resources :authors do
  resources :books
end
```

Will generate:

```
author_books      GET    /authors/:author_id/books(.:format)          books#index
                  POST   /authors/:author_id/books(.:format)          books#create
new_author_book   GET    /authors/:author_id/books/new(.:format)      books#new
edit_author_book  GET    /authors/:author_id/books/:id/edit(.:format) books#edit
author_book       GET    /authors/:author_id/books/:id(.:format)      books#show
                  PATCH  /authors/:author_id/books/:id(.:format)      books#update
                  PUT    /authors/:author_id/books/:id(.:format)      books#update
                  DELETE /authors/:author_id/books/:id(.:format) 
```

Notice that these routes will be affected by the `books` Controller. All the logic will go there to work with these nested routes.

There are some nice helpful path helpers that get generated by this nested resource stuff. If you look at rake routes, you'll see the prefixes for these under PREFIX. For example, the path `/authors/5/books` could be generated by calling `author_books(@author)`.

## Useful Links
- Navigate the files in a rails project and visit the suggested links--the docs are actually more helpful than most!